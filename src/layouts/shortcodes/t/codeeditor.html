{{ $_hugo_config := `{ "version": 1 }` }}
{{ $blockID := printf "editorcontainer%d" .Ordinal }}
{{ $langType := .Get "lang" | default "typescript" }}
{{ $style := .Get "style" | default "height: 800px;"|safeCSS }}
{{ $css := .Get "css" | default "border w-100" }}
<div id="{{ $blockID }}" class="{{ $css }}" style="{{ $style }}" ></div>
<link rel="stylesheet" data-name="vs/editor/editor.main" href="/lib/monaco-editor/min/vs/editor/editor.main.css" />
<script>
    var require = { paths: { vs: '/lib/monaco-editor/min/vs' } };
    var editor;
</script>
<script src="/lib/monaco-editor/min/vs/loader.js"></script>
<script src="/lib/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
<script src="/lib/monaco-editor/min/vs/editor/editor.main.js"></script>

<script>
    $(function(){
        var modeId = '{{ $langType }}';
        editor = monaco.editor.create(document.getElementById('{{ $blockID }}'), {
                language: modeId,
                automaticLayout: true
            });

        // init
        $.ajax({
            type: 'GET',
            url: "/resource/editor/example/"+modeId+".txt",
            dataType: 'text',
            error: function () {
                console.log("load "+modeId+" sample fail.")
            }
        }).done(function (data) {
            var oldModel = editor.getModel();
            var newModel = monaco.editor.createModel(data, modeId);
            editor.setModel(newModel);
            if (oldModel) {
                oldModel.dispose();
            }
        });
    })
</script>