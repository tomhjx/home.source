{{ $_hugo_config := `{ "version": 1 }` }}
{{ $blockID := printf "editorcontainer%d" .Ordinal }}
{{ $langType := .Get "type" | default "typescript" }}

<link rel="stylesheet" data-name="vs/editor/editor.main" href="/lib/monaco-editor/min/vs/editor/editor.main.css" />

<script>
    var require = { paths: { vs: '/lib/monaco-editor/min/vs' } };
</script>

<div id="{{ $blockID  }}" class="td-box--height-full border w-100" ></div>
<script src="/lib/monaco-editor/min/vs/loader.js"></script>
<script src="/lib/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
<script src="/lib/monaco-editor/min/vs/editor/editor.main.js"></script>

<script>
    $(function(){
        var blockID = "{{ $blockID  }}";
        var modeId = '{{ $langType }}';

        // require(['vs/editor/editor.main'], function () {
        //     var editor = monaco.editor.create(document.getElementById(blockID), {
        //         language: modeId
        //     });

        //     $.ajax({
        //         type: 'GET',
        //         url: "/resource/editor/example/{{ $langType }}.txt",
        //         dataType: 'text',
        //         error: function () {
        //             console.log("load "+blockID+"'s sample fail.")
        //         }
        //     }).done(function (data) {
        //         var oldModel = editor.getModel();
        //         var newModel = monaco.editor.createModel(data, modeId);
        //         editor.setModel(newModel);
        //         if (oldModel) {
        //             oldModel.dispose();
        //         }
        //     });

        // });

        var editor = monaco.editor.create(document.getElementById(blockID), {
                language: modeId
            });

            $.ajax({
                type: 'GET',
                url: "/resource/editor/example/{{ $langType }}.txt",
                dataType: 'text',
                error: function () {
                    console.log("load "+blockID+"'s sample fail.")
                }
            }).done(function (data) {
                var oldModel = editor.getModel();
                var newModel = monaco.editor.createModel(data, modeId);
                editor.setModel(newModel);
                if (oldModel) {
                    oldModel.dispose();
                }
            });



    })
</script>